import{r as i,c as r,h as e,F as t,a as o,g as n}from"./p-3a21c21d.js";import{R as a}from"./p-09dd41c3.js";import{C as s}from"./p-326f346c.js";import{E as c}from"./p-e8ce849d.js";const l=":host{--falloff-color:var(--rwc-falloff-color);--container-spacing:var(--rwc-spacing--sm);--header-spacing:var(--rwc-spacing--lo) var(--rwc-spacing--md);--content-spacing:var(--rwc-spacing--md);--footer-spacing:var(--rwc-spacing--lo) var(--rwc-spacing--md);--max-container-width:42.5rem;--min-container-width:20rem;--background-color:var(--rwc-background-color-main);--border-radius:var(--rwc-border-radius--md);--divider-color:var(--rwc-divider-color--light);--divider-width:var(--rwc-divider-width--default);--icon-size:var(--rwc-icon-size--md);--icon-padding:var(--rwc-spacing--sm);--icon-color:var(--rwc-color-neutral);--icon-color--hover:var(--rwc-color-neutral--hover);--modal-animation-duration:200ms}@media all and (min-width: 30rem){:host{--container-spacing:var(--rwc-spacing--md)}}@media all and (min-width: 64rem){:host{--container-spacing:var(--rwc-spacing--xl)}}.container{background-color:var(--falloff-color);display:none;flex-direction:column;justify-content:center;height:100%;width:100%;left:0;top:0;position:fixed;opacity:0}.container.open{display:flex}.container.inner-scroll .scroll-wrapper{overflow-y:hidden}.container.inner-scroll .content{overflow-y:auto}.container.inner-scroll .inner-container-wrapper{max-height:100vh;position:relative;height:100%}.container.inner-scroll .inner-container{max-height:100%;display:flex;flex-direction:column}.scroll-wrapper{overflow-y:auto}.inner-container-wrapper{box-sizing:border-box;padding:var(--container-spacing);margin-left:auto;margin-right:auto;max-width:calc(var(--max-container-width) + 2 * var(--container-spacing));min-width:var(--min-container-width);width:100%}.inner-container{background-color:var(--background-color);border-radius:var(--border-radius);position:relative}.header{padding:var(--header-spacing);position:relative}.header.flex{display:flex;flex-direction:row;justify-content:space-between}.header.flex .close{flex-shrink:0}.header.empty{padding-top:calc(var(--icon-size) - var(--content-spacing))}.content{padding:var(--content-spacing);overflow-y:hidden}.footer{padding:var(--footer-spacing)}.divider{background-color:var(--divider-color);height:var(--divider-width);width:100%}.close-wrapper{position:absolute;height:100%;right:0;top:0}.close{box-sizing:content-box;cursor:pointer;color:var(--icon-color);display:flex;flex-direction:column;height:var(--icon-size);width:var(--icon-size);justify-content:center;padding:var(--icon-padding);transition:color 0.2s ease-in-out}.close:hover{color:var(--icon-color--hover)}.close img{height:100%;max-width:100%;max-height:100%}";const d=class{constructor(e){i(this,e);this.openEvent=r(this,"modalOpen",7);this.closeEvent=r(this,"modalClose",7);this.hasHeaderContent=false;this.hasFooterContent=false;this.eventManager=new c;this.actions=["open","close","toggle"];this.animationTimeout=null;this.rwcKey=a.getDefaultComponentKey("modal");this.innerScroll=false;this.renderHeaderDivider=true;this.renderFooterDivider=true;this.renderCloseIcon=true;this.animationSpeed=200;this.isOpen=false}get currentOpacity(){var i;return Number.parseFloat(((i=this.rootElement)===null||i===void 0?void 0:i.style.opacity)||getComputedStyle(this.rootElement).opacity)}get animationDuration(){return Number.parseInt(getComputedStyle(this.host).getPropertyValue("--modal-animation-duration"))}connectedCallback(){this.init()}disconnectedCallback(){this.eventManager.clearEventListeners()}componentWillRender(){this.hasHeaderContent=Boolean(this.host.querySelector('[slot="header"]'));this.hasFooterContent=Boolean(this.host.querySelector('[slot="footer"]'))}async init(){this.eventManager.clearEventListeners();this.bindToggleActions()}async toggle(){if(this.isOpen){this.close()}else{this.open()}}async open(){if(!this.isOpen){if(d.openModal!==null){await d.openModal.close()}clearTimeout(this.animationTimeout);this.isOpen=true;this.animationTimeout=setTimeout((()=>{d.openModal=this;document.body.classList.add("modal-open");this.openEvent.emit()}),this.animationDuration)}}async close(){if(this.isOpen){clearTimeout(this.animationTimeout);this.isOpen=false;setTimeout((()=>{if(d.openModal===this){d.openModal=null;document.body.classList.remove("modal-open")}this.closeEvent.emit()}),this.animationDuration)}}bindToggleActions(){a.bindRWCActions(this,this.host,this.actions,this.rwcKey)}falloffClick(i){if(!this.innerContainer.contains(i.target)&&!this.host.contains(i.target)){this.close()}}renderHeaderHtml(){if(this.hasHeaderContent){return e(t,null,e("div",{class:{header:true,flex:this.renderCloseIcon}},e("div",null,e("slot",{name:"header"})),this.renderCloseIcon?this.renderCloseIconHtml():""),this.renderHeaderDivider?e("div",{class:"divider"}):"")}else if(this.renderCloseIcon){return e("div",{class:"header empty"},this.renderCloseIconHtml())}return""}renderFooterHtml(){if(this.hasFooterContent){return e(t,null,this.renderFooterDivider?e("div",{class:"divider"}):"",e("div",{class:"footer"},e("slot",{name:"footer"})))}return e(t,null)}renderCloseIconHtml(){if(this.renderCloseIcon){return e(t,null,e("div",{class:"close-wrapper"},e("div",{class:"close",onClick:()=>this.close(),innerHTML:s})))}return e(t,null)}render(){return e(o,null,e("div",{ref:i=>this.rootElement=i,class:{container:true,open:this.isOpen,"inner-scroll":this.innerScroll},onClick:i=>this.falloffClick(i)},e("div",{class:"scroll-wrapper"},e("div",{class:"inner-container-wrapper"},e("div",{class:"inner-container",ref:i=>this.innerContainer=i},this.renderHeaderHtml(),e("div",{class:"content"},e("slot",null)),this.renderFooterHtml())))))}get host(){return n(this)}};d.openModal=null;d.style=l;export{d as rwc_modal};
//# sourceMappingURL=p-9ae8c582.entry.js.map