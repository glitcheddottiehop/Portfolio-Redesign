{"version":3,"file":"sidebar.js","sourceRoot":"","sources":["../../../../../src/components/layout/sidebar/sidebar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Element, State, Prop, Event, EventEmitter, Method, Host, FunctionalComponent, Listen } from '@stencil/core';\nimport { IClosable } from '../../../interfaces/actions/IClosable';\nimport { IOpenable } from '../../../interfaces/actions/IOpenable';\nimport { IToggleable } from '../../../interfaces/actions/IToggleable';\nimport { SidebarPositions, SidebarStates } from '../../../interfaces/components/layout/sidebar/sidebar';\nimport { EventManager } from '../../../utils/actions/eventManager';\nimport { RWCActionHelper } from '../../../utils/actions/rwcActionHelper';\n\n@Component({\n  tag: 'rwc-sidebar',\n  styleUrl: 'sidebar.scss',\n  shadow: true\n})\nexport class RwcSidebar implements IOpenable, IClosable, IToggleable {\n  /**\n   * The reference to the host element.\n   */\n  @Element() host: HTMLRwcSidebarElement;\n  \n  /**\n   * Event manager used to manage component's event subscriptions.\n   */\n  public eventManager: EventManager = new EventManager();\n\n  /**\n   * List of the actions available for the Sidebar.\n   */\n  public actions: ('open' | 'close' | 'toggle')[] = ['open', 'close', 'toggle'];\n\n  /**\n   * The event called on the opening of the sidebar.\n   */\n  @Event({ eventName: 'sidebarOpen' }) openEvent: EventEmitter<void>;\n  \n  /**\n   * The event called on the closing of the sidebar.\n   */\n  @Event({ eventName: 'sidebarClose' }) closeEvent: EventEmitter<void>;\n\n  /**\n   * The current open state of the sidebar.\n   */\n  @State() isOpen: boolean = false;\n\n  //#region Validation\n\n  /**\n   * Default sidebar's state\n   */\n  @Prop() defaultState: SidebarStates = 'closed';\n\n  /**\n   * Key used for initializing event listeners\n   */\n  @Prop({ reflect: true }) rwcKey = RWCActionHelper.getDefaultComponentKey('sidebar');\n\n  /**\n   * Window side to stick to\n   */\n  @Prop({ reflect: true }) position: SidebarPositions = 'left';\n\n  /**\n   * If content is longer than sidebar then scroll self instead of parent\n   */\n  @Prop({ reflect: true }) innerScroll: boolean = true;\n\n  //#endregion\n\n  /**\n   * Handles the resize event of the window.\n   */\n  @Listen('resize', { target: 'window' })\n  onWindowResize(): void {\n    this.updateHostOffset();\n  }\n\n  /**\n   * Initializes default state\n   */\n  componentWillLoad(): void {\n    this.isOpen = this.defaultState === 'open';\n  }\n\n  /**\n   * Initializes event listeners on insert into DOM\n   */\n  componentDidLoad(): void {\n    this.init();\n  }\n\n  /**\n   * Removes registered event listeners before removing from DOM\n   */\n  disconnectedCallback(): void {\n    this.eventManager.clearEventListeners();\n  }\n\n  /**\n   * Initializes toggle / close / open events\n   */\n  @Method()\n  async init(): Promise<void> {\n    this.eventManager.clearEventListeners();\n    this.addToggleEventListeners();\n    this.updateHostOffset();\n  }\n\n  /**\n   * Toggles sidebar's open state\n   */\n  @Method()\n  async toggle(): Promise<void> {\n    if (this.isOpen) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Opens sidebar\n   */\n  @Method()\n  async open(): Promise<void> {\n    this.isOpen = true;\n    this.updateHostOffset();\n    this.openEvent.emit();\n  }\n\n  /**\n   * Closes sidebar\n   */\n  @Method()\n  async close(): Promise<void> {\n    this.isOpen = false;\n    this.updateHostOffset();\n    this.closeEvent.emit();\n  }\n\n  /**\n   * Updates the left or right offset of the host element based on current state.\n   */\n  private updateHostOffset(): void {\n    if (this.isOpen) {\n      if (this.position === 'left') {\n        this.host.style.right = '';\n        this.host.style.left = '0';\n      }\n\n      if (this.position === 'right') {\n        this.host.style.right = '0';\n        this.host.style.left = '';\n      }\n    } else {\n      let hostWidth = this.host.offsetWidth;\n      if (typeof hostWidth === 'undefined') {\n        hostWidth = window.innerWidth; \n      }\n      \n      if (this.position === 'left') {\n        this.host.style.right = '';\n        this.host.style.left = `-${ hostWidth }px`;\n      }\n\n      if (this.position === 'right') {\n        this.host.style.right = `-${ hostWidth }px`;\n        this.host.style.left = '';\n      }\n    }\n  }\n\n  /**\n   * Find elements by attribute name and component's key and add event listeners on click\n   */\n  addToggleEventListeners(): void {\n    RWCActionHelper.bindRWCActions(this, this.host, this.actions, this.rwcKey)\n  }\n\n  /**\n   * Renders the component.\n   */\n  render(): FunctionalComponent {\n    return (\n      <Host\n        class={ {\n          open: this.isOpen,\n          [this.position]: true,\n        } }\n      >\n        <div\n          class={ {\n            container: true,\n            open: this.isOpen,\n            [this.position]: true,\n            'inner-scroll': this.innerScroll\n          } }\n        >\n          <slot></slot>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}