{"version":3,"file":"dropdown.spec.js","sourceRoot":"","sources":["../../../../../../src/components/basic/dropdown/tests/dropdown.spec.tsx"],"names":[],"mappings":"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","sourcesContent":["import { h } from '@stencil/core';\nimport { newSpecPage } from '@stencil/core/testing';\nimport { RwcDropdown } from '../dropdown';\nimport { simulateAllOffsets, simulateOffsetSizes } from '../../../../../jest/polyfill/offset';\n\nconst containerExpectedClassesDefault = ['wrapper', 'mode-fixed', 'size-parent'];\n\ndescribe('rwc-dropdown', () => {\n  simulateAllOffsets();\n  \n  it('should render the dropdown', async () => {\n    const page = await newSpecPage({\n      components: [RwcDropdown],\n      template: () => (\n        <rwc-dropdown></rwc-dropdown>\n      ),\n    });\n\n    expect(page.root).toEqualHtml(`\n      <rwc-dropdown open-mode=\"manual\" position=\"bottom\" size=\"parent\" mode=\"fixed\">\n        <mock:shadow-root>\n          <div class=\"${ containerExpectedClassesDefault.join(' ') }\" style=\"height: 0px;\">\n            <div class=\"container\">\n              <div class=\"content\">\n                <slot></slot>\n              </div>\n            </div>\n          </div>\n        </mock:shadow-root>\n      </rwc-dropdown>\n    `);\n  });\n  \n  it('should handle the scroll event', async () => {\n    const page = await newSpecPage({\n      components: [RwcDropdown],\n      template: () => (\n        <div>\n          Dropdown parent\n          <rwc-dropdown></rwc-dropdown>\n        </div>\n      ),\n    });\n    \n    global.dispatchEvent(new Event('scroll'));\n    await page.waitForChanges();\n\n    expect(page.root).toEqualHtml(`\n      <rwc-dropdown open-mode=\"manual\" position=\"bottom\" size=\"parent\" mode=\"fixed\">\n        <mock:shadow-root>\n          <div\n            class=\"${ containerExpectedClassesDefault.join(' ') }\"\n            style=\"height: 0px; top: 0px;\"\n          >\n            <div class=\"container\">\n              <div class=\"content\">\n                <slot></slot>\n              </div>\n            </div>\n          </div>\n        </mock:shadow-root>\n      </rwc-dropdown>\n    `);\n  });\n  \n  it('should handle the resize event', async () => {\n    const page = await newSpecPage({\n      components: [RwcDropdown],\n      template: () => (\n        <div id=\"parent\">\n          Dropdown parent\n          <rwc-dropdown openMode=\"hover\"></rwc-dropdown>\n        </div>\n      ),\n    });\n    \n    document.querySelector('#parent').dispatchEvent(new MouseEvent('mouseenter'));\n    await page.waitForChanges();\n    global.dispatchEvent(new Event('resize'));\n    await page.waitForChanges();\n    await new Promise(requestAnimationFrame)\n\n    expect(page.root).toEqualHtml(`\n      <rwc-dropdown open-mode=\"hover\" position=\"bottom\" size=\"parent\" mode=\"fixed\">\n        <mock:shadow-root>\n          <div\n            class=\"${ containerExpectedClassesDefault.join(' ') }\"\n            style=\"height: 0px; width: 0px; top: 0px;\"\n          >\n            <div class=\"container\">\n              <div class=\"content\">\n                <slot></slot>\n              </div>\n            </div>\n          </div>\n        </mock:shadow-root>\n      </rwc-dropdown>\n    `);\n  });\n  \n  it('should handle click outside the dropdown', async () => {\n    await newSpecPage({\n      components: [RwcDropdown],\n      template: () => (\n        <div id=\"parent\">\n          Dropdown parent\n          <rwc-dropdown openMode=\"toggle\" mode=\"absolute\" position=\"side\"></rwc-dropdown>\n        </div>\n      ),\n    });\n    \n    const dropdownComponent = document.querySelector('rwc-dropdown');\n    // Simulate dropdown right edge out of the screen.\n    simulateOffsetSizes(2000);\n    \n    const dropdownOpenSpy = jest.fn();\n    const dropdownCloseSpy = jest.fn();\n    dropdownComponent.addEventListener('dropdownOpen', dropdownOpenSpy);\n    dropdownComponent.addEventListener('dropdownClose', dropdownCloseSpy);\n    \n    (document.querySelector('#parent') as HTMLElement).click();\n    await new Promise(requestAnimationFrame);\n    expect(dropdownOpenSpy).toBeCalledTimes(1);\n    expect(dropdownCloseSpy).toBeCalledTimes(0);\n    \n    (document.querySelector('#parent') as HTMLElement).click();\n    await new Promise(requestAnimationFrame);\n    expect(dropdownOpenSpy).toBeCalledTimes(1);\n    expect(dropdownCloseSpy).toBeCalledTimes(1);\n  });\n  \n  it('should handle the disconnected callback', async () => {\n    const page = await newSpecPage({\n      components: [RwcDropdown],\n      template: () => (\n        <rwc-dropdown></rwc-dropdown>\n      ),\n    });\n    \n    document.querySelector('rwc-dropdown').remove();\n    await page.waitForChanges();\n  });\n});\n"]}