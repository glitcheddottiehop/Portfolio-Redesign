{
  "version": 3,
  "sources": ["../../@rehaps/rehaps-web-components/dist/esm/src/components/basic/dropdown/dropdown.scss?tag=rwc-dropdown&encapsulation=shadow", "../../@rehaps/rehaps-web-components/dist/esm/src/components/basic/dropdown/dropdown.tsx"],
  "sourcesContent": ["@import 'global.scss';\n\n:host {\n  /**\n   * @prop --dropdown-background-color: The background color of the dropdown.\n   * @prop --dropdown-border: The border style of the dropdown.\n   * @prop --dropdown-border-radius: The border radius of the dropdown.\n   * @prop --dropdown-box-shadow: The box shadow of the dropdown.\n   * @prop --dropdown-max-width: The maximum width of the dropdown wrapper.\n   * @prop --dropdown-container-padding: The padding of the dropdown inner container.\n   * \n   * @prop --dropdown-wrapper-transition: The transition of the dropdown wrapper.\n   * \n   * @prop --dropdown-container-margin: The margin of the outer container of the dropdown.\n   * @prop --dropdown-container-padding: The padding of the inner container of the dropdown.\n   *\n   * @prop --dropdown-item-padding: The padding of the item inside the unnamed slot of the dropdown.\n   * @prop --dropdown-item-background-color: The background color of the item inside the unnamed slot of the dropdown.\n   * @prop --dropdown-item-hover-background-color: The background color of the item inside the unnamed slot of the dropdown on hover.\n   *\n   * @prop --dropdown-animation-duration: The duration of the opening and closing animations of the dropdown.\n   *\n   * @prop display: The display mode of the host element.\n   * @prop position: The position of the host element.\n   */\n  --dropdown-background-color: #{$rwc-color-foundation-white};\n  --dropdown-border: 1px solid #{$rwc-color-border-primary};\n  --dropdown-border-radius: #{$rwc-border-radius--md};\n  --dropdown-box-shadow: #{$rwc-box-shadow-lg};\n  --dropdown-max-width: 100%;\n\n  --dropdown-wrapper-transition: height var(--dropdown-animation-duration) ease-in-out;\n  \n  --dropdown-container-margin: #{$rwc-spacing--3xs} 0 0 0;\n  --dropdown-container-padding: #{$rwc-spacing--xs} 0;\n  \n  --dropdown-item-padding: #{$rwc-spacing--3xs} #{$rwc-spacing--xs};\n  --dropdown-item-background-color: transparent;\n  --dropdown-item-hover-background-color: #{$rwc-color-grey-200};\n  \n  --dropdown-animation-duration: 200ms;\n\n  display: block;\n  position: relative;\n}\n\n.wrapper {\n  background-color: var(--dropdown-background-color);\n  border: var(--dropdown-border);\n  border-radius: var(--dropdown-border-radius);\n  box-shadow: var(--dropdown-box-shadow);\n  height: 0;\n  left: #{$off-screen};\n  margin: var(--dropdown-container-margin);\n  max-width: var(--dropdown-wrapper-max-width);\n  overflow: hidden;\n  position: absolute;\n  transition: visibility 0ms var(--dropdown-animation-duration), left 0ms var(--dropdown-animation-duration), var(--dropdown-wrapper-transition);\n  \n  &.open {\n    left: 0;\n    visibility: visible;\n    height: auto;\n    transition: var(--dropdown-wrapper-transition);\n  }\n  \n  &.mode-fixed {\n    position: fixed;\n  }\n  \n  &.size-auto {\n    .container {\n      display: inline-block;\n    }\n  }\n}\n\n.container {\n  padding: var(--dropdown-container-padding);\n}\n\n::slotted(*) {\n  background-color: var(--dropdown-item-background-color);\n  padding: var(--dropdown-item-padding);\n}\n\n::slotted(*:hover) {\n  background-color: var(--dropdown-item-hover-background-color);\n}\n", "import { Component, Element, Event, EventEmitter, FunctionalComponent, h, Host, Listen, Method, Prop, State } from '@stencil/core';\nimport { DropdownMode, DropdownOpenMode, DropdownPosition, DropdownSize } from '../../../interfaces/components/basic/dropdown/dropdown';\nimport { IPosition } from '../../../interfaces/data/position';\nimport { EventManager } from '../../../utils/actions/eventManager';\n\n@Component({\n  tag: 'rwc-dropdown',\n  styleUrl: './dropdown.scss',\n  shadow: true\n})\nexport class RwcDropdown {\n  /**\n   * Event manager used to manage component's event subscriptions.\n   */\n  private eventManager: EventManager = new EventManager();\n\n  /**\n   * Reference to the parent of the dropdown.\n   */\n  private parent: HTMLElement;\n\n  /**\n   * Reference to the wrapper of the dropdown.\n   */\n  private wrapperElement: HTMLDivElement;\n\n  /**\n   * Reference to the container of the dropdown.\n   */\n  private containerElement: HTMLDivElement;\n\n  /**\n   * Reference to the host element of the component.\n   */\n  @Element() host: HTMLRwcDropdownElement;\n\n  /**\n   * The open mode of the dropdown.\n   */\n  @Prop({ reflect: true }) openMode: DropdownOpenMode = 'manual';\n\n  /**\n   * The position of the dropdown from the parent.\n   */\n  @Prop({ reflect: true }) position: DropdownPosition = 'bottom';\n\n  /**\n   * The sizing of the dropdown.\n   */\n  @Prop({ reflect: true }) size: DropdownSize = 'parent';\n\n  /**\n   * Determines the rendering behaviour of the dropdown.\n   */\n  @Prop({ reflect: true }) mode: DropdownMode = 'fixed';\n\n  /**\n   * Determines if the dropdown is open.\n   */\n  @State() isOpen: boolean = false;\n\n  /**\n   * Event fired when the dropdown opening is triggered.\n   */\n  @Event({ eventName: 'dropdownOpen' }) dropdownOpenEvent: EventEmitter<void>;\n  \n  /**\n   * Event fired when the dropdown closing is triggered\n   */\n  @Event({ eventName: 'dropdownClose' }) dropdownCloseEvent: EventEmitter<void>;\n\n  /**\n   * Stencil event called the first time the component is to be initialized.\n   */\n  componentWillLoad(): void {\n    this.parent = this.host.parentElement;\n    this.init();\n  }\n\n  /**\n   * Stencil event called when the component is fully loaded for the first time.\n   */\n  componentDidLoad(): void {\n    this.wrapperElement.style.height = `0px`;\n  }\n\n  /**\n   * Fires when the component is about to be destroyed.\n   */\n  disconnectedCallback(): void {\n    this.eventManager.clearEventListeners();\n  }\n\n  /**\n   * Initialize the component.\n   */\n  @Method()\n  async init(): Promise<void> {\n    this.eventManager.clearEventListeners();\n    this.initHoverEvents();\n    this.initClickEvents();\n  }\n\n  /**\n   * Handles the scroll event.\n   */\n  @Listen('scroll', { target: 'window' })\n  onWindowScroll(): void {\n    if (this.mode === 'fixed') {\n      this.calculateDropdownOffset();\n    }\n  }\n\n  /**\n   * Handles the window resize event.\n   */\n  @Listen('resize', { target: 'window' })\n  onWindowResize(): void {\n    if (this.isOpen) {\n      this.setState(false);\n    }\n  }\n\n  /**\n   * Closes the dropdown on click outside the dropdown wrapper.\n   */\n  @Listen('click', { target: 'document' })\n  async onDocumentClick(event: MouseEvent): Promise<void> {\n    if (this.isOpen && !event.composedPath().includes(this.wrapperElement)) {\n      await new Promise(requestAnimationFrame);\n      this.setState(false);\n    }\n  }\n\n  /**\n   * Initialize the hover event listeners.\n   */\n  private initHoverEvents(): void {\n    if (this.openMode === 'hover') {\n      this.eventManager.registerEventListener(this.parent, 'mouseenter', () => this.setState(true));\n      this.eventManager.registerEventListener(this.parent, 'mouseleave', () => this.setState(false));\n    }\n  }\n\n  /**\n   * Initialize the click event listeners.\n   */\n  private initClickEvents(): void {\n    if (this.openMode === 'toggle') {\n      this.eventManager.registerEventListener(this.parent, 'click', async () => {\n        if (!this.isOpen) {\n          await new Promise(requestAnimationFrame);\n          this.setState(true);\n        }\n      });\n    }\n  }\n\n  /**\n   * Set state of the dropdown.\n   */\n  @Method()\n  async setState(value: boolean): Promise<void> {\n    this.handleStateChange(value);\n  }\n\n  /**\n   * Handle the state change of the dropdown.\n   */\n  async handleStateChange(value: boolean): Promise<void> {\n    this.isOpen = value;\n    \n    if (this.isOpen) {\n      this.dropdownOpenEvent.emit();\n    } else {\n      this.dropdownCloseEvent.emit();\n    }\n    \n    await new Promise(requestAnimationFrame);\n    this.calculateDropdownSize();\n    this.calculateDropdownOffset();\n  }\n\n  /**\n   * Calculate the position of the dropdown.\n   */\n  async calculateDropdownOffset(): Promise<void> {\n    if (this.wrapperElement && this.parent) {\n      let offset = this.getStartingOffset();\n      offset = this.calculateSideOffset(offset);\n      offset = this.fixOverflow(offset);\n      \n      this.wrapperElement.style.left = this.isOpen ? `${ offset.x }px` : '';\n      this.wrapperElement.style.top = `${ offset.y }px`;\n    }\n  }\n\n  /**\n   * Get the starting offset of the dropdown.\\\n   * Returns zero for non fixed modes.\n   */\n  private getStartingOffset(): IPosition {\n    if (this.mode === 'fixed') {\n      return {\n        x: this.parent.getBoundingClientRect().left,\n        y: this.parent.getBoundingClientRect().top\n      }\n    } else {\n      return {\n        x: 0,\n        y: 0\n      }\n    }\n  }\n\n  /**\n   * Get the offset for the side position of the dropdown.\n   */\n  private calculateSideOffset({ x, y }: IPosition): IPosition {\n    if (this.position === 'side') {\n      x += this.parent.offsetWidth;\n      if (this.mode === 'absolute') {\n        y = - this.parent.offsetHeight;\n      }\n    } else if (this.mode === 'fixed') {\n      y += this.parent.offsetHeight;\n    }\n\n    return {\n      x: x,\n      y: y\n    }\n  }\n\n  /**\n   * Calculate the right overflow and position the dropdown to fit the screen.\n   */\n  private fixOverflow({ x, y }: IPosition): IPosition {\n    const rightEdgePosition = this.mode === 'absolute' ?\n      this.parent.getBoundingClientRect().left + x + this.wrapperElement.offsetWidth :\n      x + this.wrapperElement.offsetWidth;\n\n    if (rightEdgePosition > window.innerWidth) {\n      x -= rightEdgePosition - window.innerWidth;\n    }\n\n    return {\n      x: x,\n      y: y\n    }\n  }\n\n  /**\n   * Calculate the size of the dropdown if set to parent size.\n   */\n  private async calculateDropdownSize(): Promise<void> {\n    this.wrapperElement.style.height = `${this.isOpen ? this.containerElement.offsetHeight : 0}px`;\n    if (this.mode === 'fixed' && this.size === 'parent') {\n      this.wrapperElement.style.width = `${ this.parent.offsetWidth }px`;\n    } else {\n      this.wrapperElement.style.width = '';\n    }\n  }\n\n  /**\n   * Renders the component.\n   */\n  render(): FunctionalComponent {\n    return (\n      <Host>\n        <div\n          ref={ (element: HTMLDivElement) => this.wrapperElement = element }\n          class={ {\n            wrapper: true,\n            open: this.isOpen,\n            [`mode-${ this.mode }`]: true,\n            [`size-${ this.size }`]: true\n          } }>\n          <div\n            ref={ (element: HTMLDivElement) => this.containerElement = element }\n            class=\"container\"\n          >\n            <div class=\"content\">\n              <slot></slot>\n            </div>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
