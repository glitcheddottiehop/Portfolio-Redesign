import{l as a,m as r,p as e,s as o,H as s,q as l}from"./index-f173c7d3.js";import{R as t}from"./rwcActionHelper-202b4497-2db27a40.js";import{C as c}from"./close-fa8fe5b6-a0033c52.js";import{E as d}from"./eventManager-f421930c-38da3c88.js";const h=":host{--falloff-color:var(--rwc-falloff-color);--container-spacing:var(--rwc-spacing--sm);--header-spacing:var(--rwc-spacing--lo) var(--rwc-spacing--md);--content-spacing:var(--rwc-spacing--md);--footer-spacing:var(--rwc-spacing--lo) var(--rwc-spacing--md);--max-container-width:42.5rem;--min-container-width:20rem;--background-color:var(--rwc-background-color-main);--border-radius:var(--rwc-border-radius--md);--divider-color:var(--rwc-divider-color--light);--divider-width:var(--rwc-divider-width--default);--icon-size:var(--rwc-icon-size--md);--icon-padding:var(--rwc-spacing--sm);--icon-color:var(--rwc-color-neutral);--icon-color--hover:var(--rwc-color-neutral--hover);--modal-animation-duration:200ms}@media all and (min-width: 30rem){:host{--container-spacing:var(--rwc-spacing--md)}}@media all and (min-width: 64rem){:host{--container-spacing:var(--rwc-spacing--xl)}}.container{background-color:var(--falloff-color);display:none;flex-direction:column;justify-content:center;height:100%;width:100%;left:0;top:0;position:fixed;opacity:0}.container.open{display:flex}.container.inner-scroll .scroll-wrapper{overflow-y:hidden}.container.inner-scroll .content{overflow-y:auto}.container.inner-scroll .inner-container-wrapper{max-height:100vh;position:relative;height:100%}.container.inner-scroll .inner-container{max-height:100%;display:flex;flex-direction:column}.scroll-wrapper{overflow-y:auto}.inner-container-wrapper{box-sizing:border-box;padding:var(--container-spacing);margin-left:auto;margin-right:auto;max-width:calc(var(--max-container-width) + 2 * var(--container-spacing));min-width:var(--min-container-width);width:100%}.inner-container{background-color:var(--background-color);border-radius:var(--border-radius);position:relative}.header{padding:var(--header-spacing);position:relative}.header.flex{display:flex;flex-direction:row;justify-content:space-between}.header.flex .close{flex-shrink:0}.header.empty{padding-top:calc(var(--icon-size) - var(--content-spacing))}.content{padding:var(--content-spacing);overflow-y:hidden}.footer{padding:var(--footer-spacing)}.divider{background-color:var(--divider-color);height:var(--divider-width);width:100%}.close-wrapper{position:absolute;height:100%;right:0;top:0}.close{box-sizing:content-box;cursor:pointer;color:var(--icon-color);display:flex;flex-direction:column;height:var(--icon-size);width:var(--icon-size);justify-content:center;padding:var(--icon-padding);transition:color 0.2s ease-in-out}.close:hover{color:var(--icon-color--hover)}.close img{height:100%;max-width:100%;max-height:100%}",n=class{constructor(i){a(this,i),this.openEvent=r(this,"modalOpen",7),this.closeEvent=r(this,"modalClose",7),this.hasHeaderContent=!1,this.hasFooterContent=!1,this.eventManager=new d,this.actions=["open","close","toggle"],this.animationTimeout=null,this.rwcKey=t.getDefaultComponentKey("modal"),this.innerScroll=!1,this.renderHeaderDivider=!0,this.renderFooterDivider=!0,this.renderCloseIcon=!0,this.animationSpeed=200,this.isOpen=!1}get currentOpacity(){var i;return Number.parseFloat(((i=this.rootElement)===null||i===void 0?void 0:i.style.opacity)||getComputedStyle(this.rootElement).opacity)}get animationDuration(){return Number.parseInt(getComputedStyle(this.host).getPropertyValue("--modal-animation-duration"))}connectedCallback(){this.init()}disconnectedCallback(){this.eventManager.clearEventListeners()}componentWillRender(){this.hasHeaderContent=!!this.host.querySelector('[slot="header"]'),this.hasFooterContent=!!this.host.querySelector('[slot="footer"]')}async init(){this.eventManager.clearEventListeners(),this.bindToggleActions()}async toggle(){this.isOpen?this.close():this.open()}async open(){this.isOpen||(n.openModal!==null&&await n.openModal.close(),clearTimeout(this.animationTimeout),this.isOpen=!0,this.animationTimeout=setTimeout(()=>{n.openModal=this,document.body.classList.add("modal-open"),this.openEvent.emit()},this.animationDuration))}async close(){this.isOpen&&(clearTimeout(this.animationTimeout),this.isOpen=!1,setTimeout(()=>{n.openModal===this&&(n.openModal=null,document.body.classList.remove("modal-open")),this.closeEvent.emit()},this.animationDuration))}bindToggleActions(){t.bindRWCActions(this,this.host,this.actions,this.rwcKey)}falloffClick(i){!this.innerContainer.contains(i.target)&&!this.host.contains(i.target)&&this.close()}renderHeaderHtml(){return this.hasHeaderContent?e(o,null,e("div",{class:{header:!0,flex:this.renderCloseIcon}},e("div",null,e("slot",{name:"header"})),this.renderCloseIcon?this.renderCloseIconHtml():""),this.renderHeaderDivider?e("div",{class:"divider"}):""):this.renderCloseIcon?e("div",{class:"header empty"},this.renderCloseIconHtml()):""}renderFooterHtml(){return this.hasFooterContent?e(o,null,this.renderFooterDivider?e("div",{class:"divider"}):"",e("div",{class:"footer"},e("slot",{name:"footer"}))):e(o,null)}renderCloseIconHtml(){return this.renderCloseIcon?e(o,null,e("div",{class:"close-wrapper"},e("div",{class:"close",onClick:()=>this.close(),innerHTML:c}))):e(o,null)}render(){return e(s,null,e("div",{ref:i=>this.rootElement=i,class:{container:!0,open:this.isOpen,"inner-scroll":this.innerScroll},onClick:i=>this.falloffClick(i)},e("div",{class:"scroll-wrapper"},e("div",{class:"inner-container-wrapper"},e("div",{class:"inner-container",ref:i=>this.innerContainer=i},this.renderHeaderHtml(),e("div",{class:"content"},e("slot",null)),this.renderFooterHtml())))))}get host(){return l(this)}};n.openModal=null;n.style=h;export{n as rwc_modal};
